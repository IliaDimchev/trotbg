{% extends "base/base.html" %}

{% block title %}TROT.BG - Начало{% endblock %}

{% block content %}

<section class="max-w-3xl mx-auto px-4 py-10 text-center">

  <h1 class="text-2xl md:text-3xl font-bold mb-4 text-amber-300">
    Свържете се с TROT
  </h1>

  <p class="mb-8 text-gray-300">
    Обслужваме електрически тротинетки, скутери и велосипеди!
  </p>

  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    <input type="hidden" name="form_start" value="{{ timestamp }}">
    <input type="text" name="website" style="display:none">

    <input type="text" name="name" value="{{ name or '' }}" placeholder="Име" required
      class="w-full px-4 py-2 rounded bg-neutral-800 border border-neutral-700 text-white" />
    <input type="email" name="email" value="{{ email or '' }}" placeholder="Имейл" required
      class="w-full px-4 py-2 rounded bg-neutral-800 border border-neutral-700 text-white" />
    <input type="text" name="phone" value="{{ phone or '' }}" placeholder="Телефон" pattern="^(\+359|0)?8[789]\d{7}$" required
      class="w-full px-4 py-2 rounded bg-neutral-800 border border-neutral-700 text-white">

    <textarea name="message" placeholder="С какво можем да помогнем?" rows="5" required
      class="w-full px-4 py-2 rounded bg-neutral-800 border border-neutral-700 text-white">{{ message or '' }}</textarea>

    <label for="attachments"
      class="block w-full cursor-pointer bg-gray-500 hover:bg-gray-600 text-black font-semibold text-center py-2 rounded transition-all duration-200">
      Прикачи файл
    </label>
    <p id="file-count" class="text-sm text-gray-400 mt-1">Не са избрани файлове (до 25 MB общо)</p>
    <input id="attachments" type="file" name="attachments" accept="image/*,video/*" multiple class="hidden"
      onchange="updateFileLabel(this.files)" />
    

    <script>
      function updateFileLabel(files) {
        const label = document.getElementById('file-count');
        if (files.length === 0) {
          label.textContent = "Не са избрани файлове";
        } else {
          label.textContent = `${files.length} файл(а) избрани`;
        }
      }
    </script>

    <button type="submit"
      class="w-full bg-amber-500 hover:bg-amber-600 text-black font-semibold py-2 rounded transition-all duration-200">
      Изпрати запитване
    </button>
  </form>
</section>

{% endblock %}

{% block scripts %}
<!-- <script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
  <script>
    grecaptcha.ready(function () {
      grecaptcha.execute('{{ recaptcha_site_key }}', {action: 'submit'}).then(function (token) {
        document.getElementById('recaptcha_token').value = token;
      });
    });
  </script> -->
{% endblock %}